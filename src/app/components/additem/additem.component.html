<section class="clean-block clean-form dark">
    <div class="container">
        <div class="block-heading">
            <div *ngIf="!editing">
                <h2 class="text-info">Add Menu Item to {{r.name}}</h2>
            </div>
            <div *ngIf="editing">
                <h2 class="text-info">Edit {{item.name}} at {{r.name}}</h2>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <form method="post" [formGroup]="itemForm" (ngSubmit)="onSubmit()" (change)="onChange()" enctype="multipart/form-data">
                    <div class="mb-3"><label class="form-label" for="name">Name</label><input id="name" formControlName="name" class="form-control" type="text" name="name" required/></div>
                    <div class="row">
                        <div class="col">
                            <div class="mb-3"><label class="form-label" for="price">Price</label><input id="price" formControlName="price" class="form-control" type="number" name="price" min="0" required/></div>
                        </div>
                        <div class="col">
                            <div class="mb-3">
                                <label class="form-label" for="category">Category</label>
                                    <!-- <input id="subject-1" class="form-control" type="text" name="subject" /> -->
                            
                                <mat-select id="category" formControlName="category" class="form-control" [formControl]="control" placeholder="Category" required>
                                    <mat-option value="appetizers">Appetizers</mat-option>
                                    <mat-option value="sides">Sides</mat-option>
                                    <mat-option value="entrées">Entrées</mat-option>
                                    <mat-option value="desserts">Desserts </mat-option>
                                    <mat-option value="beverages">Beverages</mat-option>
                                </mat-select>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3"><label class="form-label" for="description">Description</label><textarea id="mesdescriptionsage" formControlName="description" class="form-control" name="description"></textarea></div>
                    
                    <div class="mb-3"><input class="form-control" #file type="file" accept='image/*' (change)="handleUpload(file.files)"/></div>

                    <div *ngIf="itemForm.invalid && (name.touched&&price.touched&&category.touched)" class="alert alert-danger">
                        
                        <div *ngIf="name.errors?.['required']&&name.touched">
                            Name is required.
                        </div>
                        <div *ngIf="price.errors?.['required']&&price.touched">
                            Price is required.
                        </div>
                        <div *ngIf="category.errors?.['required']&&category.touched">
                            Category is required.
                        </div>
                    </div>
                    <div class="mb-3"><button class="btn btn-primary" type="submit" [disabled]="itemForm.invalid">{{action}}</button></div>
                </form>
            </div>
            <div class="col-4 align-self-center">
                <app-menu-item 
                    [index]=1
                    [item]=this.item>
                </app-menu-item>
            </div>
        </div>
    </div>
</section>
